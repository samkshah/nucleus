on: 
  workflow_dispatch:
  push:

jobs:
  retrieve-nucleus-vulns:
    name: Nucleus_Vulnerability_Report
    runs-on: ubuntu-latest
    permissions:
      contents: write
    env:
        NUCLEUS_API_KEY: ${{ secrets.NUCLEUS_API_KEY }}
        NUCLEUS_PROJECT_GROUP: '/Product Name/Cybersecurity Incident Response'
        NUCLEUS_PROJECT_ID: '13000008'
        LOGLEVEL: 'INFO'
        NUCLEUS_API_ENDPOINT: "https://nucleus-us3.nucleussec.com/nucleus/api"
        NUCLEUS_DATAFOLDER: "nucleus/vulnerabilities"
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v3

      - name: Get Vulns
        uses: ./

      - name: List Vulns
        run:
          ls -l $NUCLEUS_DATAFOLDER
